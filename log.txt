@Mrwang_tju  2019.12.20
Motor driver for STM32F405RG

** will do
@** done



2020.8.6
0.规划减速部分，重写位置规划
1.反转速度规划部分正常，规划过程中使用绝对值，10ms控制周期指定转动方向
2.完成梯形速度规划曲线，当前存在的问题是--》与目标设定由50counts左右的偏差
3.在达到posErr内时，关闭控制状态  或进行位置保持   当前存在低速爬行   微微的声音也是低速爬行的结果

2020.7---
0.看代码，规划位置控制


2020.1.14
0.梯形速度规划  减速阶段怎么准确停车？？  当前存在当poserr为负值时，减速阶段会超出目标值的问题


2020.1.11
0.不变参数梯形速度控制基本完成
1.**发现在speedTar=0时，控制的PWM!=0 导致电机有轻微的声音

2020.1.10
0.排除bug  Encounter 修改为 long long 类型 排除不定期的速度控制的抖动问题
1.排除bug 在转动过程中读取电机状态  会影响底层控制的问题  --》将串口处理部分放到main函数中
2.速度在很接近目标角度  但不超越  设置为0不停止  --》将速度环pi控制修改为pwm lastPWM 修改为float类型

2020.1.08
0.继续编写梯形规划部分  比较复杂

2020.1.07
0.实现梯形轨迹规划  依据中间状态求解转动方向与速度部分  初次的梯形时间节点计算待完善

2020.1.04
0.实现电机速度跟随
**1.实现梯形运动轨迹规划

2020.01.02
0.修复TIM14中断问题  设计是500us  实际是1ms中断  修复上电编码器计数是65535的问题
1.完成denug规划的功能
**2.掉电保存数据  记录当前电机绝对位置
**3.电机模式  	a.控制模式  --》指定位置、速度  从flash内提取设定的梯形曲线加减速度
				b.轮子模式		直接指定pwm  没有加减速过程
				c.阻尼模式
				d.失能驱动		关闭驱动电路
				e.精确速度控制	--》指定电机速度  时刻跟随


2019.12.29
0.返回速度  加速度信息  修改加速度部分
@**1.规划debug功能实现  flash可调采样频率  开始时间
	a,修改所需要的调试采样参数  频率、数据类型
	b,设定启动延时  上位机程序配合
	c,触发后获取数据准备状态
	d,数据准备好后接受到文件
	
**2.基于速度环的位置控制规划实现
	a,先实现固定参数的梯形速度曲线  然后实现变参数梯形规划
**3.状态显示灯

2019.12.28
0.换电源芯片  当前现象:jlink不给电路板供电，电路板下载程序容易失败  且电子电源电流显示为0
单片机不运行，可能导致板子断电？？   但是jlink还是能检测到，下载1/4能下载成功
1.完成id检测
2.加速度部分还需要完善  测出来的数据抖动范围较大


2019.12.26
0.实现电机测速  返回rad/s
1.读取外部可选的 id  还有bug io变化没有触发中断

2019.12.25
0.完成12.23  返回信息  flash数据存储部分 adc部分
1.功能规划
	主要实现位置控制，其中可以指定加速度、减速度及中间速度

2019.12.23
0.驱动芯片  在使用过程中发现  DAC限流到2048时，直接以一个大的PWM电机无法启动，或启动后运行速度很慢
并伴有噪声  以此猜测是PWM突然变大，芯片限流  PWM大很快再次限流导致的电机无法启动或运行速度慢（不断截断）
**可以尝试另外一种驱动方式，应该不会出现给到最大PWM无法转动的情况
1.PWM选择了PWM mode2  按照驱动手册给
2.通讯修改DAC的值
@**3.返回信息  a.编码器值   b.pwm值  c.DAC值  d.ADC值
@**4.flash数据存储部分  初始化 读  写
@5.adc部分


2019.12.20  &  12.22
0.cube初始化配置代码  PWM ADC  DAC(限流)  USART Encoder  LED
1.测试硬件电路  --上电  代码下载  测试基础功能
2.git仓库初始化  同步
3.CAN总线测试  can  LBK引脚没接   
RS  低电平 	can高速模式
	高电平	低电流仅监听模式
	
驱动芯片
nSLEEP  0  	失能
		1	使能



